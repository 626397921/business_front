# 重新实现分页和选中功能

## 问题分析
1. **跨页选中功能**：当前实现可能无法正确记住所有页的选中记录
2. **全选功能**：当前实现可能只选中当前页的记录，而不是所有页的记录
3. **反选功能**：当前实现没有实现反选功能，即点击全选后选中除已选中记录外的所有记录

## 修复计划

### 1. 优化选中状态管理
- 添加 `totalSelectedIds` 变量，用于存储所有页的选中记录ID
- 添加 `isAllSelected` 变量，用于标识是否全选所有页的记录
- 添加 `currentPageSelectedIds` 变量，用于存储当前页的选中记录ID

### 2. 实现全选所有页功能
- 修改表格的 `select-all` 事件处理
- 当点击全选时，根据当前状态决定是全选所有页还是取消全选
- 全选时，将所有记录ID添加到 `totalSelectedIds` 中
- 取消全选时，清空 `totalSelectedIds`

### 3. 实现反选功能
- 当点击全选时，检查当前是否有部分选中的记录
- 如果有部分选中的记录，点击全选后应选中除已选中记录外的所有记录
- 更新 `totalSelectedIds` 以反映反选后的状态

### 4. 优化跨页选中状态恢复
- 修改 `getRecordList` 函数，在数据加载后正确恢复选中状态
- 确保切换页码时，之前页的选中记录仍然保持选中状态
- 确保页码变化时，当前页的选中状态正确显示

### 5. 修复分页事件处理
- 修改 `handleSizeChange` 和 `handleCurrentChange` 函数，确保分页操作不会重置选中状态
- 确保分页操作后，选中状态正确恢复

### 6. 测试验证
- 测试跨页选中功能：在不同页码之间切换，验证选中记录是否保持
- 测试全选功能：点击全选，验证是否选中所有页的记录
- 测试反选功能：选中部分记录后点击全选，验证是否选中除已选中记录外的所有记录
- 测试分页操作：切换页码和改变每页显示数量，验证选中状态是否保持

## 技术实现要点
- 使用 `Set` 类型存储选中的记录ID，确保唯一性
- 利用 Element Plus 的 `reserve-selection` 属性实现跨页选中
- 在表格的 `select-all` 事件中实现全选和反选逻辑
- 在数据加载后，根据 `totalSelectedIds` 恢复选中状态
- 确保所有修改操作后，选中状态正确更新

通过以上修复，确保分页和选中功能能够正确实现用户要求的所有功能点。